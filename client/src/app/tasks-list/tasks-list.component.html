<div>
    <div *ngIf="tasks.length === 0">
        <p-messages [(value)]="msgs" [closable]="false"></p-messages>
    </div>
    <div *ngIf="tasks.length> 0">
        <p-table selectionMode="single" scrollHeight="50vh"
                [columns]="cols" 
                [resizableColumns]="true"
                [value]="tasks" 
                [(selection)]="selectedTask"
                [scrollable]="true">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col *ngFor="let col of columns" [style.width]="col.width">
                    <col style="width:10%">
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field" pResizableColumn>
                        {{col.header}}
                        <p-sortIcon [field]="col.field" 
                            ariaLabel="Activate to sort" 
                            ariaLabelDesc="Activate to sort in descending order" 
                            ariaLabelAsc="Activate to sort in ascending order">
                        </p-sortIcon>
                    </th>
                    <th>Actions</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-task>
                <tr [pSelectableRow]="task">
                    <td class="ui-resizable-column">{{task.name}}</td>
                    <td class="ui-resizable-column">{{task.priority | priority}}</td>
                    <td class="ui-resizable-column">{{task.added | date: 'dd/MM/yyyy hh:ss'}}</td>
                    <td class="ui-resizable-column">{{task.timeToComplete}}</td>
                    <td>
                        <button pButton style="width:100%" *ngIf="task.isActive" label="Complete" class="ui-button-success"></button>
                        <button pButton style="width:100%" *ngIf="!task.isActive" label="Delete" class="ui-button-danger"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <p></p>
        <p-fieldset class="details-fieldset" *ngIf="selectedTask !== null" legend="Task details"
            [toggleable]="false">
            <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid"
                style="margin: 10px 0px">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-2">Name:</div>
                    <div class="ui-grid-col-10">{{selectedTask.name}}</div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-2">Description:</div>
                    <div class="ui-grid-col-10">
                        <span style="white-space: pre">{{selectedTask.description}}</span>
                    </div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-2">Status:</div>
                    <div class="ui-grid-col-10">{{selectedTask.status | status}}</div>
                </div>
                <div class="ui-grid-row">
                    <div class="ui-grid-col-2">Priority:</div>
                    <div class="ui-grid-col-10">{{selectedTask.priority | priority}}</div>
                </div>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-2">Added:</div>
                    <div class="ui-grid-col-10">{{selectedTask.added | date: 'dd/MM/yyyy hh:ss' }}</div>
                </div>
            </div>
        </p-fieldset>
    </div>
</div>
